syntax = "proto3";

package proto;
option go_package = "pkg/proto";

import "common.proto";
import "plugin_meta.proto";

// cmd: plugin get
message PluginGetRequest {
    ID id=1;
    bool flagVerbose=2;
}

message PluginPullRequest {
    ID id=1;
    bool flagDeps=2;
}

// cmd: plugin install
message PluginInstallRequest {
    ID id=1;
    bool flagVerbose=2;
    bool flagDeps=3;
    bool flagAll=4;
}

message PluginInterfaceRequest{
    string interfaceName=1;
}

// cmd: plugin list
message PluginListRequest{
    bool flagAll=1;
    bool flagError=2;
    bool flagInstalled = 3;
    bool flagRunning = 4;
    bool flagInstallable=5;
    bool flagInactive=6;
}

message PluginListWithStatus {
    ID id = 1;
    Author author = 2;
    repeated Dependency dependencies = 3;
    Description description = 4;
    Core core = 5;
    string interface = 6;
    License license = 7;
    repeated Link links = 8;
    Repository repository = 9;
    repeated string tags = 10;
    bool flagAll=11;
    bool flagError=12;
    bool flagInstalled = 13;
    bool flagRunning = 14;
    bool flagInstallable=15;
    bool flagInactive=16;
}

message PluginListWithoutStatus{
    ID id = 1;
    Author author = 2;
    repeated Dependency dependencies = 3;
    Description description = 4;
    Core core = 5;
    string interface = 6;
    License license = 7;
    repeated Link links = 8;
    Repository repository = 9;
    repeated string tags = 10;
}

message PluginListReply{
    repeated PluginListWithStatus data = 1;
    ErrorReply errorPlugin = 2;
}

// cmd: plugin remove
message PluginRemoveRequest {
    ID id=1;
}

message PluginStartRequest{
    ID id=1;
    bool flagAll=2;
}

message PluginStopRequest{
    ID id=1;
    bool flagAll=2;
}

// cmd: plugin uninstall
message PluginUninstallRequest {
    ID id=1;
    bool flagAll=2;
    bool flagDependent=3;
}

// cmd: plugin upload
message PluginUploadRequest {
    string filepath = 1;
}

// cmd: plugin meta
message PluginMetaRequest {
    PluginID id = 1;
    bool flagDeps = 2;
    bool flagDepsStatus=3;
    bool flagDependent = 4;
    bool flagDependentStatus=5;
}

message PluginMetaReply {
    repeated PluginListWithoutStatus data=1;
}